(function(n){n.asyncUpload=function(t,i){var s={showProgress:!0,minFileSize:1,multiple:!1},r=this,f,u,e;r.settings={};r.$element=n(t);u=r.$element;r.init=function(){var t,o;r.settings=n.extend({},s,i);r.$element.prop("tagName").toLowerCase()!="input"?(t=r.$element.attr("id")||_.uniqueId("asyncUpload-"),r.$element.replaceWith('<a id="'+t+'" class="fileupload-container"><\/a>'),n("#"+t).html(r.$element.html()).addClass(r.$element.attr("class")).append('<span class="fileupload-progress"><i class="fa fa-refresh fa-spin"><\/i><\/span>').append('<input type="file"/>'),u=n("#"+t),f=n(u).find("input:file").first(),r.settings.multiple&&f.attr("multiple","multiple"),e=u.find(".fileupload-progress").first(),u.click(function(t){n(t.target).is('input[type="file"]')||n(this).find('input[type="file"]').click()}),r.$element=n("#"+t)):f=r.$element;u.hasClass("fileupload-button")||u.addClass("fileupload-button");r.settings.fileTypes&&f.attr("accept",i.fileTypes.join(","));o={url:r.settings.url,type:r.settings.type||"POST",sequentialUploads:!0,dropZone:null,pasteZone:null,start:function(){r.settings.showProgress&&e&&(e.fadeIn(),u.addClass("disabled"));r.settings.onStart&&r.settings.onStart()},add:function(n,t){var i=t.files;t.files.valid=t.isValidated=h(i);t.isValidated||(r.settings.onValidationFail?r.settings.onValidationFail():notify.error(c(i)));t.isValidated&&t.submit()},stop:function(){r.settings.showProgress&&e&&(e.hide(),u.removeClass("disabled"))},fail:function(n,t){var i=JSON.parse(t.jqXHR.responseText);if(notify.error(i.ErrorMessage),r.settings.onError)r.settings.onError(i)},done:function(n,t){if(r.settings.onComplete)r.settings.onComplete(t.result)},send:function(n,t){if(!t.isValidated)return!1},formData:function(){return[]}};r.fileuploadPlugin=f.fileupload(o)};r.changeUrl=function(n){r.$element.find("input:file").fileupload("option","url",n);var t=r.$element.find("input:file").fileupload("option","url")};var o=function(n){return typeof n!="number"?"":n>=1e9?(n/1e9).toFixed(2)+" GB":n>=1e6?(n/1e6).toFixed(2)+" MB":(n/1e3).toFixed(2)+" KB"},h=function(n){for(var f,u,e,i=!0,t=0;t<n.length;t++){if(r.settings.fileTypes){for(f=!1,u=0;u<r.settings.fileTypes.length;u++)if(e=r.settings.fileTypes[u].toLowerCase(),n[t].type.toLowerCase().indexOf(e.substring(1))!=-1||n[t].name.toLowerCase().indexOf(e)!=-1){f=!0;break}i=f}if(r.settings.maxFileSize&&n[t].size>r.settings.maxFileSize&&(i=!1),r.settings.minFileSize&&n[t].size<r.settings.minFileSize&&(i=!1),!i)break}return i},c=function(n){for(var f,u,e,t=0;t<n.length;t++){if(r.settings.fileTypes){for(f=!1,u=0;u<r.settings.fileTypes.length;u++)if(e=r.settings.fileTypes[u].toLowerCase(),n[t].type.toLowerCase().indexOf(e.substring(1))!=-1||n[t].name.toLowerCase().indexOf(e)!=-1){f=!0;break}if(!f)return"Filetype not allowed, Supported File Types: "+i.fileTypes.join(",")}if(r.settings.maxFileSize&&n[t].size>r.settings.maxFileSize)return"File is too big, Maximum File Size: "+o(r.settings.maxFileSize);if(r.settings.minFileSize&&n[t].size<r.settings.minFileSize)return"File is too small, Minimum File Size: "+o(r.settings.minFileSize)}};r.init()};n.fn.asyncUpload=function(t){var r=arguments,i;return t===undefined||typeof t=="object"?this.each(function(){if(!n(this).data("asyncUpload")){var i=new n.asyncUpload(this,t);return n(this).data("asyncUpload",i),i.$element}}):typeof t=="string"&&t[0]!=="_"&&t!=="init"?(this.each(function(){var u=n(this).data("asyncUpload");i=u[t].apply(u,Array.prototype.slice.call(r,1))}),i!==undefined?i:this):void 0}})(jQuery);
//# sourceMappingURL=async-upload.min.js.map
